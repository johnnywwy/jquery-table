<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="./jquery-3.6.0.min.js"></script>
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.datatables.net/v/dt/dt-1.10.20/datatables.min.css"
    />
    <link rel="stylesheet" href="./index.css" />

    <script
      type="text/javascript"
      src="https://cdn.datatables.net/v/dt/dt-1.10.20/datatables.min.js"
    ></script>
  </head>
  <body>
    <h3>学生信息表</h3>
    <button id="addRow">新增行</button>
    <button id="delRow">删除行</button>

    <table id="example" class="display" cellspacing="0" width="100%"></table>

    <script>
      var dataSet = [
        ["张三", "男", "13", "20220512", "一年一班", "编辑"],
        ["李四", "女", "14", "20220513", "一年一班", "删除"],
        ["王五", "男", "12", "20220514", "一年一班", "删除"],
        ["赵六", "女", "11", "20220515", "一年一班", "删除"],
        ["吴七", "男", "10", "20220516", "一年一班", "删除"],
        ["张八", "男", "13", "20220512", "一年一班", "删除"],
        ["李九", "女", "14", "20220513", "一年一班", "删除"],
      ];

      $(document).ready(function () {
        var counter = `<input type="text">`;
        var table = $("#example").DataTable({
          info: false,
          data: dataSet,
          ordering: false,
          searching: false,
          pageLength: 10,
          columns: [
            { title: "学生姓名" },
            { title: "学生性别" },
            { title: "学生年龄" },
            { title: "学号" },
            { title: "班级" },
          ],
          buttons: [
            {
              extend: "edit",
              editor: example,
              formButtons: [
                {
                  label: "Cancel",
                  fn: function () {
                    this.close();
                  },
                },
                "Create new row",
              ],
            },
          ],
        });

        $("#example tbody").on("click", "tr", function () {
          if ($(this).hasClass("selected")) {
            $(this).removeClass("selected");
          } else {
            table.$("tr.selected").removeClass("selected");
            $(this).addClass("selected");
          }
        });
        $("#delRow").click(function () {
          table.row(".selected").remove().draw(false);
        });

        $("#addRow").on("click", function () {
          table.row
            .add([counter, counter, counter, counter, counter, counter])
            .draw(false);
          counter++;
        });
      });
    </script>
  </body>
</html>
